{"version":3,"sources":["webpack:///./src/views/BlogsPage.vue","webpack:///./src/views/BlogsPage.vue?d465","webpack:///./src/views/BlogsPage.vue?5414"],"names":["_hoisted_1","key","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","__default__","name","__props","route","store","listBlogs","loading","id","params","val","search","query","categoryActive","categoryId","listCategories","getters","getCategories","getAllCategories","data","dispatch","error","console","log","filterBlogsByCategory","Number","value","formatData","Promise","all","map","item","thumbUrl","createdDate","toDate","format","filterBlogsByTitle","getData","_ctx","_cache","_component_router_view","_directive_loading","Button","type","to","className","bgColor","default","_","length","index","BlogCard","title","readMinute","shortDescription","showShortDesc","content","_idDoc","__exports__"],"mappings":"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","file":"js/chunk-555f5d5a.2560d33f.js","sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4e525312\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"blogs-page\"\n}\nconst _hoisted_2 = {\n  key: 0,\n  class: \"filter-categories\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"loading-wrapper\"\n}\nconst _hoisted_4 = { key: 2 }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"list-blogs\"\n}\n\n\nimport { useRoute } from 'vue-router';\nimport Button from '@/components/Button.vue';\nimport BlogCard from '@/components/BlogCard.vue';\nimport { ICategory } from '@/types/Category';\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { getCategories } from '@/services/category';\nimport {\n  getBlogsByCategory,\n  getBlogsByTitle,\n  getImageUrl\n} from '@/services/blog';\nimport moment from 'moment';\nimport { IBlog } from '@/types/Blog';\nimport { useStore } from 'vuex';\nimport { UPDATE_CATEGORIES_ACTION } from '@/store';\nconst __default__ = {\n  name: 'blogs-page'\n};\n\nexport default /*#__PURE__*/_defineComponent({\n  ...__default__,\n  setup(__props) {\n\nconst route = useRoute();\nconst store = useStore();\n// const listCategories = ref<ICategory[] | null>(null);\nconst listBlogs = ref<IBlog[] | null>(null);\nconst loading = ref<boolean>(false);\n\nconst id = computed({\n  get() {\n    return route.params.id;\n  },\n  set(val) {\n    //\n  }\n});\n\nconst search = computed({\n  get() {\n    return route.query.search;\n  },\n  set(val) {\n    //\n  }\n});\n\nconst categoryActive = computed({\n  get() {\n    return route.query.categoryId;\n  },\n  set(val) {\n    //\n  }\n});\n\nconst listCategories = computed({\n  get() {\n    return store.getters.getCategories;\n  },\n  set(val) {\n    //\n  }\n});\n\nconst getAllCategories = async () => {\n  try {\n    const data = await getCategories();\n    store.dispatch(UPDATE_CATEGORIES_ACTION, data);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst filterBlogsByCategory = async () => {\n  try {\n    const data = await getBlogsByCategory(Number(categoryActive.value));\n    const formatData = await Promise.all(\n      data.map(async (item) => {\n        return {\n          ...item,\n          thumbUrl: await getImageUrl((item.thumbUrl as string) || ''),\n          createdDate: moment((item.createdDate as any).toDate()).format(\n            'DD/MM/YYYY - HH:mm:ss'\n          )\n        } as IBlog;\n      })\n    );\n    // console.log(formatData);\n    listBlogs.value = formatData;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst filterBlogsByTitle = async () => {\n  try {\n    const data = await getBlogsByTitle(search.value as string);\n    const formatData = await Promise.all(\n      data.map(async (item) => {\n        return {\n          ...item,\n          thumbUrl: await getImageUrl((item.thumbUrl as string) || ''),\n          createdDate: moment((item.createdDate as any).toDate()).format(\n            'DD/MM/YYYY - HH:mm:ss'\n          )\n        } as IBlog;\n      })\n    );\n    listBlogs.value = formatData;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst getData = async () => {\n  try {\n    loading.value = true;\n    await getAllCategories();\n    categoryActive.value\n      ? await filterBlogsByCategory()\n      : await filterBlogsByTitle();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nwatch(route, () => {\n  if (!id.value) {\n    getData();\n  }\n});\n\nonMounted(() => {\n  if (!id.value) {\n    getData();\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_view = _resolveComponent(\"router-view\")!\n  const _directive_loading = _resolveDirective(\"loading\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (!_unref(id))\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _createElementVNode(\"div\", null, [\n            (_unref(listCategories))\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(listCategories), (item) => {\n                    return (_openBlock(), _createBlock(Button, {\n                      key: item.id,\n                      type: \"link\",\n                      to: `/blogs?categoryId=${item.id}`,\n                      className: \"btn-category\",\n                      bgColor: _unref(categoryActive) == item.id ? 'black' : 'primary'\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(_toDisplayString(item.name), 1)\n                      ]),\n                      _: 2\n                    }, 1032, [\"to\", \"bgColor\"]))\n                  }), 128))\n                ]))\n              : _createCommentVNode(\"\", true),\n            (loading.value)\n              ? _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_3, null, 512)), [\n                  [_directive_loading, loading.value]\n                ])\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  (listBlogs.value && listBlogs.value.length)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(listBlogs.value, (item, index) => {\n                          return (_openBlock(), _createBlock(BlogCard, {\n                            key: index,\n                            title: item.title,\n                            type: item.type,\n                            createdDate: item.createdDate,\n                            readMinute: item.readMinute,\n                            thumbUrl: item.thumbUrl,\n                            shortDescription: item.shortDescription,\n                            showShortDesc: true,\n                            content: item.content,\n                            to: `/blogs/${item._idDoc}`\n                          }, null, 8, [\"title\", \"type\", \"createdDate\", \"readMinute\", \"thumbUrl\", \"shortDescription\", \"content\", \"to\"]))\n                        }), 128))\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ]))\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createVNode(_component_router_view)\n  ], 64))\n}\n}\n\n})","import script from \"./BlogsPage.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./BlogsPage.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./BlogsPage.vue?vue&type=style&index=0&id=4e525312&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/ducdominh/Documents/project_dev/GoRead/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4e525312\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BlogsPage.vue?vue&type=style&index=0&id=4e525312&lang=scss&scoped=true\""],"sourceRoot":""}